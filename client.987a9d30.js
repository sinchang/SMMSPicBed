webpackJsonp([1],[,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(23),a=i.n(n),r=i(20),s=i.n(r);new a.a({el:"#app",render:function(e){return e(s.a)}})},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"vue-img-inputer",props:{type:{default:"img",type:String},accept:{default:"image/*,video/*;",type:String},capture:{default:!0,type:Boolean},id:{default:"",type:String},onChange:{default:null,type:Function},readonly:{type:Boolean,default:!1},readonlyTipText:{default:"不可更改",type:String},bottomText:{default:"点击或拖拽图片以修改",type:String},placeholder:{default:"点击或拖拽选择图片",type:String},value:{default:void 0},icon:{default:"",type:String},customerIcon:{default:"",type:String},maxSize:{default:5120,type:Number},size:{default:"",type:String},imgSrc:{default:"",type:String},nhe:{type:Boolean,default:!1},noMask:{type:Boolean,default:!1},theme:{type:String,default:""},name:{type:String,default:"file"}},data:function(){return{inputId:"",file:[],dataUrl:"",fileName:"",errText:""}},computed:{imgSelected:function(){return!!this.dataUrl||!!this.fileName},sizeHumanRead:function(){return this.maxSize<1024?this.maxSize+"K":(this.maxSize/1024).toFixed(this.maxSize%1024>0?2:0)+"M"},sizeClass:function(){if(this.size)return"img-inputer--"+this.size},themeClass:function(){return"img-inputer--"+this.theme},ICON:function(){return this.icon?this.icon:"light"==this.theme?"img":"clip"},iconUnicode:function(){var e={img:"&#xe624;",clip:"&#xe62d;",img2:"&#xe62f;"};return this.customerIcon||e[this.ICON]}},mounted:function(){var e=this;this.inputId=this.id||this.gengerateID(),this.imgSrc&&(this.dataUrl=this.imgSrc),["dragleave","drop","dragenter","dragover"].forEach(function(t){e.preventDefaultEvent(t)}),this.addDropSupport()},methods:{preventDefaultEvent:function(e){document.addEventListener(e,function(e){e.preventDefault()},!1)},addDropSupport:function(){var e=this;this.$refs.box.addEventListener("drop",function(t){if(t.preventDefault(),e.readonly)return!1;e.errText="";var i=t.dataTransfer.files;return 0!==i.length&&(i.length>1?(e.errText="暂不支持多文件",!1):void e.handleFileChange(i))})},gengerateID:function(){var e=Math.random().toString(36).substring(3,8);return document.getElementById(e)?this.gengerateID():e},handleFileChange:function(e){if(void 0===e.target?this.file=e[0]:this.file=e.target.files[0],this.errText="",Math.floor(this.file.size/1024)>this.maxSize)return this.errText="文件大小不能超过"+this.sizeHumanRead,!1;this.$emit("input",this.file),this.onChange&&this.onChange(this.file,this.file.name),this.$emit("onChange",this.file,this.file.name),this.imgPreview(this.file),this.fileName=this.file.name,this.resetInput()},imgPreview:function(e){var t=this;if(e&&window.FileReader&&/^image/.test(e.type)){var i=new FileReader;i.readAsDataURL(e),i.onloadend=function(){t.dataUrl=this.result}}},resetInput:function(){var e=document.getElementById(this.inputId),t=document.createElement("form");document.body.appendChild(t);var i=e.parentNode,n=i.lastChild===e,a=void 0;n||(a=e.nextSibling),t.appendChild(e),t.reset(),n?i.appendChild(e):i.insertBefore(e,a),document.body.removeChild(t)}},watch:{imgSrc:function(e,t){e&&(this.dataUrl=e)},value:function(e,t){t&&!e&&(this.file=[],this.dataUrl="",this.errText="",this.fileName="")}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),a=i(18),r=i(6),s=i.n(r),o=i(14),l=i.n(o),u=i(15),d=i.n(u);t.default={name:"app",data:function(){return{url:"",accept:"image/png,image/jpg;"}},computed:{markdownUrl:function(){return"![]("+this.url+")"}},methods:{cb:function(e){var t=this,n=new FormData(document.getElementById("form"));this.url="",d.a.inc(),i.i(a.a)("https://sm.ms/api/upload?ssl=true",{method:"POST",body:n}).then(function(e){return e.json()}).then(function(e){d.a.done(),t.url=e.data.url})},initClipboard:function(e){var t=e.currentTarget;this.clipboard=new s.a(t),this.clipboard.on("success",function(e){l()({message:"复制成功",type:"success"})}),this.clipboard.on("error",function(e){l()({message:"复制失败",type:"error"})})},destroyClipboard:function(){this.clipboard&&(this.clipboard.destroy(),this.clipboard=null)}},components:{VueImgInputer:n.a}}},,,,,function(e,t){},,function(e,t){},,,,,,,,function(e,t,i){i(9);var n=i(0)(i(3),i(21),null,null);e.exports=n.exports},function(e,t,i){i(10),i(11);var n=i(0)(i(4),i(22),null,null);e.exports=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"box",staticClass:"img-inputer",class:[e.themeClass,e.sizeClass,e.nhe?"nhe":""]},[i("i",{staticClass:"iconfont img-inputer__icon",domProps:{innerHTML:e._s(e.iconUnicode)}}),e._v(" "),i("p",{staticClass:"img-inputer__placeholder"},[e._v(e._s(e.placeholder))]),e._v(" "),e.imgSelected?i("div",{staticClass:"img-inputer__preview-box"},[i("img",{staticClass:"img-inputer__preview-img",attrs:{src:e.dataUrl}})]):e._e(),e._v(" "),i("label",{staticClass:"img-inputer__label",attrs:{for:e.readonly?"":e.inputId}}),e._v(" "),e.imgSelected&&!e.noMask?i("div",{staticClass:"img-inputer__mask"},[i("p",{staticClass:"img-inputer__file-name"},[e._v(e._s(e.fileName))]),e._v(" "),e.readonly?i("p",{staticClass:"img-inputer__change"},[e._v(e._s(e.readonlyTipText))]):i("p",{staticClass:"img-inputer__change"},[e._v(e._s(e.bottomText))])]):e._e(),e._v(" "),e.capture?i("input",{ref:"inputer",staticClass:"img-inputer__inputer",attrs:{type:"file",name:e.name,id:e.inputId,accept:e.accept,capture:"video"},on:{change:e.handleFileChange}}):i("input",{ref:"inputer",staticClass:"img-inputer__inputer",attrs:{type:"file",name:e.name,id:e.inputId,accept:e.accept},on:{change:e.handleFileChange}}),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.errText.length?i("div",{staticClass:"img-inputer__err"},[e._v(e._s(e.errText))]):e._e()])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("form",{attrs:{id:"form"}},[i("VueImgInputer",{attrs:{theme:"light",onChange:e.cb,name:"smfile"}})],1),e._v(" "),i("div",{staticClass:"text-wrap"},[e.url?i("span",{staticClass:"text",attrs:{"data-clipboard-text":e.url},on:{mouseover:e.initClipboard,mouseout:e.destroyClipboard}},[e._v(e._s(e.url))]):e._e(),e._v(" "),e.url?i("span",{staticClass:"text",attrs:{"data-clipboard-text":e.markdownUrl},on:{mouseover:e.initClipboard,mouseout:e.destroyClipboard}},[e._v(e._s(e.markdownUrl))]):e._e()]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"copyright"},[e._v("感谢"),i("a",{attrs:{href:"https://sm.ms",target:"_blank"}},[e._v(" sm.ms ")]),e._v("提供的api | made with "),i("a",{attrs:{href:"https://github.com/sinchang"}},[e._v("sinchang")])])}]}},,,function(e,t,i){e.exports=i(1)}],[25]);
//# sourceMappingURL=client.987a9d30.js.map